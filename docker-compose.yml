services:
  msut-auth-app:
    image: crpi-75lq6t3o28kvt0hk.cn-heyuan.personal.cr.aliyuncs.com/msut/msut-web:latest
    container_name: msut-auth-app
    user: "0:0"
    ports:
      - "1122:80"
      - "3400:3400"
    environment:
      - NODE_ENV=production
      - PORT=3400
      - JWT_SECRET=${JWT_SECRET:-please-change-this-secret-in-production}
      - PUBLIC_BASE_URL=${PUBLIC_BASE_URL:-http://localhost:1122}
      - HTTPS_ENABLED=${HTTPS_ENABLED:-false}
      - COOKIE_DOMAIN=${COOKIE_DOMAIN:-}
      - DATA_DIR=/app/server/data
    volumes:
      - ./uploads:/app/server/uploads
      - ./data/data.sqlite:/app/server/data/data.sqlite
    restart: unless-stopped
    networks:
      - msut-network



networks:
  msut-network:
    driver: bridge
